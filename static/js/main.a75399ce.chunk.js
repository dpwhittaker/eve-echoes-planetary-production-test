(this["webpackJsonpeve-echoes-planetary-production"]=this["webpackJsonpeve-echoes-planetary-production"]||[]).push([[0],{129:function(e,t,a){e.exports=a(175)},175:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),o=a(240),i=a(241),u=a(116),s=a(239),m=a(26),b=a(38),d=a(35),f=a(14),h=a(237),g=a(217),v=a(238),p=a(244),y=a(228),O=a(236),j=a(84);function E(e,t){var a=Object(n.useState)((function(){return JSON.parse(localStorage.getItem(e))||t})),r=Object(f.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){localStorage.setItem(e,JSON.stringify(c))}),[e,c]),[c,l]}var w=a(245),x=a(222),C=a(248);function k(e){var t=e.label,a=e.limit,n=Object(m.a)(e,["label","limit"]);return r.a.createElement(g.a,{item:!0,xs:12,md:6,lg:4},r.a.createElement(w.a,Object.assign({},n,{filterOptions:Object(x.a)({limit:a}),renderInput:function(e){return r.a.createElement(C.a,Object.assign({},e,{label:t,variant:"outlined"}))}})))}k.defaultProps={limit:100};var S=k,R=a(247),P=a(226),z=a(250),T=a(242),N=a(251);function B(e){return r.a.createElement(g.a,{container:!0,spacing:1},e.map((function(e){return r.a.createElement(g.a,{item:!0,key:e},r.a.createElement(R.a,{label:e}))})))}var D=function(e){var t=e.id,a=e.label,n=e.onChange,c=e.options,l=Object(m.a)(e,["id","label","onChange","options"]),o="".concat(t,"-label");return r.a.createElement(g.a,{item:!0,xs:12,md:6,lg:4},r.a.createElement(P.a,{fullWidth:!0},r.a.createElement(z.a,{id:o},a),r.a.createElement(T.a,Object.assign({},l,{displayEmpty:!0,id:t,labelId:o,multiple:!0,onChange:function(e){return n(e,e.target.value)},renderValue:B}),c.map((function(e){return r.a.createElement(N.a,{key:e,value:e},e)})))))},I=a(252);function M(e){var t=e.label,a=Object(m.a)(e,["label"]);return r.a.createElement(g.a,{item:!0,xs:12,md:6,lg:4},r.a.createElement(z.a,null,t),r.a.createElement(I.a,a))}M.defaultProps={valueLabelDisplay:"auto"};var K=M,H=a(28),L=a(12),W=a(177),F=a(227),J=a(115),_=a(59),A=a(113),V=a(4);V.v.DefaultUp.set(0,0,1);var G=Object(W.a)((function(e){return Object(F.a)({root:{height:"calc(100vh - (".concat(e.spacing(4),"px * 2))")},title:{height:32,marginLeft:e.spacing(1),width:"max-content"}})})),q={};var U=function(e){var t=e.title,a=e.nodes,c=e.links,l=e.baseSystem,o=e.details,i=e.route,u=Object(n.useRef)(null),s=G();function m(e){var t=e.id===l?"#9999ff":"#"+(e.security<0?"ff":parseInt(255*(1-e.security)).toString(16).padStart(2,"0"))+(e.security>0?"ff":parseInt(255*(e.security+1)).toString(16).padStart(2,"0"))+"00",a=o.find((function(t){return t.systemId===e.id}))||e.id===l;if(o.length>100||!a)return new V.s(new V.H(a?20:10,5),new V.t({color:t}));var n=q[e.system];return n||((n=new A.a(e.system)).color=e.security>=-.5?"black":"white",n.backgroundColor=t,n.textHeight=50,q[e.system]=n),n}var d=Object(n.useMemo)((function(){return a.find((function(e){return e.id===l}))}),[a,l]),f=performance.now(),h=Object(n.useMemo)((function(){for(var e=Object(L.a)({},i[0],{}),t=1;t<i.length;t++)e[i[t]]||(e[i[t]]={}),e[i[t-1]][i[t]]=!0,e[i[t]][i[t-1]]=!0;return{nodes:a,links:c.map((function(t){var a=e[t.source]&&e[t.source][t.target];return Object(b.a)(Object(b.a)({},t),{},{color:a?"#3399ff":"#666666",width:a?20:10})}))}}),[a,c,i]);function g(){if(d&&a.length){u.current.camera().up.set(0,0,1);var e,t=null,n=Object(H.a)(a);try{var r=function(){var a=e.value;if(!i.includes(a.id)&&!o.find((function(e){return e.systemId===a.id})))return"continue";t||(t={x:[a.fx,a.fx],y:[a.fy,a.fy],z:[a.fz,a.fz]}),a.fx<t.x[0]&&(t.x[0]=a.fx),a.fx>t.x[1]&&(t.x[1]=a.fx),a.fy<t.y[0]&&(t.y[0]=a.fy),a.fy>t.y[1]&&(t.y[1]=a.fy),a.fz<t.z[0]&&(t.z[0]=a.fz),a.fz>t.z[1]&&(t.z[1]=a.fz)};for(n.s();!(e=n.n()).done;)r()}catch(m){n.e(m)}finally{n.f()}var c={x:(t.x[0]+t.x[1])/2,y:(t.y[0]+t.y[1])/2,z:(t.z[0]+t.z[1])/2},l=1.2*Math.max(t.x[1]-t.x[0],t.z[1]-t.z[0]),s={x:c.x,y:c.y-l,z:c.z-l/4};console.log("bbox",t,c,l,s),u.current.cameraPosition(s,c,3e3)}}return console.log("route time",performance.now()-f),r.a.createElement("div",{className:s.root},r.a.createElement(_.a,null,(function(e){var a=e.height,n=e.width,c=t?a-40.4:a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:s.title,gutterBottom:!0,variant:"h5"},t),r.a.createElement(J.a,{enableNodeDrag:!1,graphData:h,height:c,nodeThreeObject:m,linkWidth:"width",linkOpacity:.5,nodeLabel:function(e){return"".concat(e.system," ").concat(e.security.toFixed(1),"<br/>x: ").concat(e.fx,"<br/>y: ").concat(e.fy,"<br/>z: ").concat(e.fz)},ref:u,width:n,cooldownTicks:1,controlType:"orbit",onEngineTick:g}))})))},$=a(229),Q=a(230);var X=function(e){var t=e.columns,a=e.data,n=e.page,c=e.rowsPerPage,l=n*c,o=l+c;return a.slice(l,o).map((function(e,a){return r.a.createElement($.a,{key:a},t.map((function(t,a){var n=e[t.dataKey],c=t.display?t.display(n):n,l={};return t.width&&(l.width=t.width),r.a.createElement(Q.a,{align:t.numeric?"right":"left",key:a,style:l},c)})))}))},Y=a(231),Z=a(232),ee=a(233),te=a(234),ae=a(246);function ne(e){var t=e.columns,a=e.data,c=Object(n.useState)(t&&t[0].sortDirection?t[0].sortDirection:"asc"),l=Object(f.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(t.length?t[0].dataKey:void 0),s=Object(f.a)(u,2),m=s[0],b=s[1],h=Object(n.useState)(0),v=Object(f.a)(h,2),p=v[0],y=v[1],O=Object(n.useState)(5),j=Object(f.a)(O,2),E=j[0],w=j[1];Object(n.useEffect)((function(){return y(0)}),[a]);var x=Object(n.useMemo)((function(){return Object(d.a)(a).sort((function(e,t){var a="asc"===o?1:-1;return e[m]===t[m]?0:e[m]>t[m]?1*a:-1*a}))}),[a,o,m]);function C(e,t){b(e),i(t)}return r.a.createElement(g.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(Y.a,null,r.a.createElement(Z.a,null,r.a.createElement(ee.a,null,r.a.createElement($.a,null,t.map((function(e,t){return r.a.createElement(ce,{column:e,direction:o,key:t,onChangeSort:C,orderBy:m})})))),r.a.createElement(te.a,null,r.a.createElement(X,{columns:t,data:x,page:p,rowsPerPage:E})))),r.a.createElement(ae.a,{component:"div",count:a.length,onChangePage:function(e,t){return y(t)},onChangeRowsPerPage:function(e){var t=p*E,a=e.target.value;y(t/a),w(a)},page:p,rowsPerPage:E,rowsPerPageOptions:[5,10,25]}))}ne.defaultProps={columns:[],data:[]};var re=a(253);var ce=function(e){var t=e.column,a=e.direction,n=e.onChangeSort,c=e.orderBy,l=(e.columnData,e.dataKey,e.disableSort,e.sortBy,Object(m.a)(e,["column","direction","onChangeSort","orderBy","columnData","dataKey","disableSort","sortBy"])),o=c===t.dataKey,i={align:t.numeric?"right":"left",key:t.dataKey,sortDirection:!!o&&a};return t.sortable?i.children=r.a.createElement(re.a,{active:o,direction:o?a:"asc",onClick:function(){return n(t.dataKey,o&&"asc"===a?"desc":"asc")}},t.label):i.children=t.label,r.a.createElement(Q.a,Object.assign({},l,i))},le=a(83),oe=a.n(le),ie=Object(W.a)((function(e){return Object(F.a)({flexContainer:{display:"flex",alignItems:"center",boxSizing:"border-box"},root:{height:"calc(100vh - (".concat(e.spacing(4),"px * 2))")},table:{"& .ReactVirtualized__Table__headerRow":{flip:!1,paddingRight:"rtl"===e.direction?"0 !important":void 0}},tableRow:{cursor:"pointer"},tableRowHover:{"&:hover":{backgroundColor:e.palette.grey[800]}},tableCell:{flex:1},title:{height:32,marginLeft:e.spacing(1),width:"max-content"},noClick:{cursor:"initial"}})}));function ue(e){var t=e.columns,a=e.data,c=e.headerHeight,l=e.onRowClick,o=e.rowHeight,i=e.title,u=e.selectedId,s=ie(),h=Object(n.useState)(t&&t[0].sortDirection?t[0].sortDirection:"asc"),g=Object(f.a)(h,2),v=g[0],p=g[1],O=Object(n.useState)(t.length?t[0].dataKey:void 0),j=Object(f.a)(O,2),E=j[0],w=j[1],x=Object(n.useMemo)((function(){return Object(d.a)(a).sort((function(e,t){var a="asc"===v?1:-1;return e[E]===t[E]?0:e[E]>t[E]?1*a:-1*a}))}),[a,v,E]),C=oe()(s.tableCell,s.flexContainer,Object(L.a)({},s.noClick,null==l)),k=Object(n.useCallback)((function(e){var t=e.index;return oe()(s.tableRow,s.flexContainer,Object(L.a)({},s.tableRowHover,-1!==t&&null!=l))}),[s,l]),S=Object(n.useCallback)((function(e){var a=e.cellData,n=e.columnIndex;return r.a.createElement(Q.a,{align:null!=n&&t[n].numeric?"right":"left",component:"div",className:C,style:{height:o},variant:"body"},a)}),[C,t,o]),R=Object(n.useCallback)((function(e){var t=e.column,a=Object(m.a)(e,["column"]);return r.a.createElement(ce,Object.assign({className:oe()(s.tableCell,s.flexContainer,s.noClick),column:t,component:"div",style:{height:c},variant:"head"},a),t.label)}),[s,c]);function P(e,t){w(e),p(t)}return r.a.createElement("div",{className:s.root},r.a.createElement(_.a,null,(function(e){var a=e.height,n=e.width,m=i?a-40.4:a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:s.title,gutterBottom:!0,variant:"h5"},i),r.a.createElement(_.c,{className:s.table,gridStyle:{direction:"inherit"},headerHeight:c,height:m,noRowsRenderer:function(){return r.a.createElement("div",null,"No results.")},rowClassName:k,rowCount:x.length,rowGetter:function(e){var t=e.index;return x[t]},rowHeight:o,width:n,sortBy:E,rowStyle:function(e){var t=e.index;return t>-1&&x[t].id===u?{backgroundColor:"#666"}:{undefined:void 0}},onRowClick:l},t.map((function(e,t){var a={column:e,direction:v,onChangeSort:P,orderBy:E};return r.a.createElement(_.b,{cellRenderer:S,className:s.flexContainer,dataKey:e.dataKey,headerRenderer:function(e){return R(Object(b.a)(Object(b.a)({},a),e))},key:t,width:Number.isInteger(e.width)?e.width:e.width*n})}))))})))}ue.defaultProps={columns:[],data:[],headerHeight:48,rowHeight:48,selectedId:0};var se=ue,me=a(66),be=a(114),de=a(54),fe=a(67),he=a(70),ge=a(220),ve=a(243),pe=a(235),ye=a(8),Oe=function(e){Object(fe.a)(a,e);var t=Object(he.a)(a);function a(e){var n;return Object(me.a)(this,a),(n=t.call(this,e)).state={currentTab:0},n.setCurrentTab=n.setCurrentTab.bind(Object(de.a)(n)),n}return Object(be.a)(a,[{key:"setCurrentTab",value:function(e){this.setState({currentTab:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.classes,c=t.subNav,l=t.tabs,o=this.state.currentTab;return r.a.createElement(g.a,{className:n.root,item:!0,lg:12,md:12,xs:12},r.a.createElement(ge.a,{className:n.paper},r.a.createElement(ve.a,{centered:!0,onChange:function(t,a){return e.setCurrentTab(a)},value:o,variant:"fullWidth"},l.map((function(e,t){return r.a.createElement(pe.a,{key:t,label:e.label})})))),c,a[o])}}]),a}(r.a.Component);Oe.defaultProps={children:[],tabs:[]};var je=Object(ye.a)({root:{maxHeight:"100vh"},paper:{flexGrow:1}})(Oe);var Ee=j.b(new function(){return new Worker(a.p+"static/js/query.0283fadb.worker.js")}),we=Object(O.a)({pageLoading:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},test:{height:10,width:120}});var xe=function(){var e=E("baseSystem",0),t=Object(f.a)(e,2),a=t[0],c=t[1],l=E("distanceRange",[0,10]),o=Object(f.a)(l,2),i=o[0],u=o[1],s=E("securityRange",[.5,1]),O=Object(f.a)(s,2),w=O[0],x=O[1],C=E("richnessRange",[90,200]),k=Object(f.a)(C,2),R=k[0],P=k[1],z=E("resources",["Lustering Alloy"]),T=Object(f.a)(z,2),N=T[0],B=T[1],I=E("planetology",1),M=Object(f.a)(I,2),H=M[0],L=M[1],W=E("roundTrips",50),F=Object(f.a)(W,2),J=F[0],_=F[1],A=Object(n.useState)([]),V=Object(f.a)(A,2),G=V[0],q=V[1],$=Object(n.useState)(0),Q=Object(f.a)($,2),X=Q[0],Y=Q[1],Z=Object(n.useState)(65),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(["Lustering Alloy"]),re=Object(f.a)(ne,2),ce=re[0],le=re[1],oe=Object(n.useState)([]),ie=Object(f.a)(oe,2),ue=ie[0],me=ie[1],be=Object(n.useState)([]),de=Object(f.a)(be,2),fe=de[0],he=de[1],ge=Object(n.useState)([]),ve=Object(f.a)(ge,2),pe=ve[0],ye=ve[1],Oe=Object(n.useState)([]),xe=Object(f.a)(Oe,2),Ce=xe[0],ke=xe[1],Se=Object(n.useState)(0),Re=Object(f.a)(Se,2),Pe=Re[0],ze=Re[1],Te=Object(n.useState)({nodes:[],links:[]}),Ne=Object(f.a)(Te,2),Be=Ne[0],De=Ne[1],Ie=Object(h.a)((function(e){return e.breakpoints.down("sm")})),Me=we(),Ke=Object(n.useRef)(null);Object(n.useEffect)((function(){Ee.longestPath(a).then((function(e){return ae(e)}))}),[a]),Object(n.useEffect)((function(){Ee.getResources().then((function(e){return le(e)}))}),[]),Object(n.useEffect)((function(){Ee.getSystems().then((function(e){return me(e)}))}),[]),Object(n.useEffect)((function(){Ee.matchingProduction(a,i,w,R,N).then((function(e){he(e),ye(e)}))}),[a,i,w,N,R]),Object(n.useEffect)((function(){Ee.findBestMatches(fe,a,N,H,J,j.a(q),j.a(Y))}),[fe,a,N,H,J]),Object(n.useEffect)((function(){console.log("calculating neighborhood"),Ee.neighborhood(a,i[1]).then((function(e){return De(e)}))}),[a,i[1]]);var He=Object(n.useMemo)((function(){var e=Object(d.a)(Array(Math.round(te/10)).keys()).map((function(e){return{value:10*e,label:10*e}}));return e[-1]!==te&&e.push({value:te,label:te}),e}),[te]),Le=Object(n.useMemo)((function(){return[{Component:se,columns:[{dataKey:"totalRichness",label:"Total Richness",sortable:!0,sortDirection:"desc",width:.25},{dataKey:"roundTrip",label:"Round Trip",numeric:!0,sortable:!0,width:.25},{dataKey:"planets",label:"Planets",numeric:!0,sortable:!0,width:.25},{dataKey:"systems",label:"Systems",numeric:!0,sortable:!0,width:.25}],data:G,grid:{md:6,lg:4,xl:3},label:"Best Matches",selectedId:Pe,onRowClick:function(e){var t=e.rowData;console.log("click",t),window.scrollTo(0,document.body.scrollHeight),ye(t.matches),ke(t.route),ze(t.id),Ke&&Ke.current&&Ke.current.setCurrentTab(1)},title:Ie?void 0:"Best Matches"},Object(b.a)(Object(b.a)({Component:U},Be),{},{baseSystem:a,details:pe,route:Ce,grid:{md:6,lg:8,xl:9},label:"Map",title:Ie?void 0:"Map"})]}),[G,pe,Ie,Pe]),We=r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(v.a,{value:X,variant:"determinate"}));return 0===ue.length?r.a.createElement(p.a,{className:Me.pageLoading,open:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h5",gutterBottom:!0},"Loading..."),r.a.createElement("div",{className:Me.test},r.a.createElement(v.a,null)))):r.a.createElement(g.a,{container:!0,spacing:4},r.a.createElement(g.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(y.a,{variant:"h4",width:1},"EVE Echoes"),r.a.createElement(y.a,{variant:"h5",width:1},"Planetary Production")),r.a.createElement(S,{disableClearable:!0,getOptionLabel:function(e){return ue[e].label},label:"Base System",onChange:function(e,t){return c(t)},options:ue.map((function(e,t){return t})),value:a}),r.a.createElement(K,{label:"Distance to System (jumps)",marks:He,max:te,min:0,onChange:function(e,t){return u(t)},step:1,value:i}),r.a.createElement(K,{label:"System Security",marks:[{value:-1,label:"-1.0"},{value:0,label:"0.0"},{value:.5,label:"0.5"},{value:1,label:"1.0"}],max:1,min:-1,onChange:function(e,t){return x(t)},step:.1,value:w}),r.a.createElement(D,{id:"resources",label:"Resource Types",onChange:function(e,t){return B(t)},options:ce,value:N}),r.a.createElement(K,{label:"Resource Richness",marks:[{value:25,label:"25"},{value:100,label:"high sec"},{value:133,label:"low sec"},{value:200,label:"200"}],max:200,min:25,onChange:function(e,t){return P(t)},step:1,value:R}),r.a.createElement(K,{label:"Planets (Planetology max development)",marks:[{value:1,label:"1"},{value:6,label:"6"}],max:6,min:1,onChange:function(e,t){return L(t)},step:1,value:H}),r.a.createElement(K,{label:"Max Round Trip length (jumps)",marks:[0,50,100,150,200].map((function(e){return{value:e,label:"".concat(e)}})),max:200,min:0,onChange:function(e,t){return _(t)},step:1,value:J}),Ie?r.a.createElement(je,{ref:Ke,tabs:Le,subNav:We},Le.map((function(e,t){var a=e.Component,n=Object(m.a)(e,["Component"]);return r.a.createElement(a,Object.assign({key:t},n))}))):r.a.createElement(r.a.Fragment,null,We,Le.map((function(e,t){var a=e.Component,n=e.grid,c=Object(m.a)(e,["Component","grid"]);return r.a.createElement(g.a,Object.assign({key:t,item:!0,md:6},n),r.a.createElement(a,c))}))))},Ce=Object(u.a)({palette:{type:"dark"}});var ke=function(){return r.a.createElement(s.a,{theme:Ce},r.a.createElement(o.a,null),r.a.createElement(i.a,{maxWidth:"xl",style:{marginTop:16}},r.a.createElement(xe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.a75399ce.chunk.js.map