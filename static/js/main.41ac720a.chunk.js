(this["webpackJsonpeve-echoes-planetary-production"]=this["webpackJsonpeve-echoes-planetary-production"]||[]).push([[0],{129:function(e,t,a){e.exports=a(175)},175:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),o=a(240),i=a(241),u=a(116),s=a(239),m=a(27),d=a(38),b=a(35),f=a(14),h=a(237),g=a(217),v=a(238),p=a(244),y=a(228),O=a(236),j=a(84);function E(e,t){var a=Object(n.useState)((function(){return JSON.parse(localStorage.getItem(e))||t})),r=Object(f.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){localStorage.setItem(e,JSON.stringify(l))}),[e,l]),[l,c]}var w=a(245),x=a(222),S=a(248);function C(e){var t=e.label,a=e.limit,n=Object(m.a)(e,["label","limit"]);return r.a.createElement(g.a,{item:!0,xs:12,md:6,lg:4},r.a.createElement(w.a,Object.assign({},n,{filterOptions:Object(x.a)({limit:a}),renderInput:function(e){return r.a.createElement(S.a,Object.assign({},e,{label:t,variant:"outlined"}))}})))}C.defaultProps={limit:100};var k=C,R=a(247),P=a(226),z=a(250),T=a(242),K=a(251);function N(e){return r.a.createElement(g.a,{container:!0,spacing:1},e.map((function(e){return r.a.createElement(g.a,{item:!0,key:e},r.a.createElement(R.a,{label:e}))})))}var D=function(e){var t=e.id,a=e.label,n=e.onChange,l=e.options,c=Object(m.a)(e,["id","label","onChange","options"]),o="".concat(t,"-label");return r.a.createElement(g.a,{item:!0,xs:12,md:6,lg:4},r.a.createElement(P.a,{fullWidth:!0},r.a.createElement(z.a,{id:o},a),r.a.createElement(T.a,Object.assign({},c,{displayEmpty:!0,id:t,labelId:o,multiple:!0,onChange:function(e){return n(e,e.target.value)},renderValue:N}),l.map((function(e){return r.a.createElement(K.a,{key:e,value:e},e)})))))},B=a(252);function I(e){var t=e.label,a=Object(m.a)(e,["label"]);return r.a.createElement(g.a,{item:!0,xs:12,md:6,lg:4},r.a.createElement(z.a,null,t),r.a.createElement(B.a,a))}I.defaultProps={valueLabelDisplay:"auto"};var M=I,H=a(28),L=a(12),W=a(177),F=a(227),J=a(115),_=a(59),A=a(113),V=a(4);V.v.DefaultUp.set(0,0,1);var G=Object(W.a)((function(e){return Object(F.a)({root:{height:"calc(100vh - (".concat(e.spacing(4),"px * 2))")},title:{height:32,marginLeft:e.spacing(1),width:"max-content"}})})),q={};var U=function(e){var t=e.title,a=e.nodes,l=e.links,c=e.baseSystem,o=e.details,i=e.route,u=Object(n.useRef)(null),s=G();function m(e){var t=e.id===c?"#9999ff":"#"+(e.security<0?"ff":parseInt(255*(1-e.security)).toString(16).padStart(2,"0"))+(e.security>0?"ff":parseInt(255*(e.security+1)).toString(16).padStart(2,"0"))+"00",a=o.find((function(t){return t.systemId===e.id}))||e.id===c;if(o.length>100||!a)return new V.s(new V.H(a?20:10,5),new V.t({color:t}));var n=q[e.system];return n||((n=new A.a(e.system)).color=e.security>=-.5?"black":"white",n.backgroundColor=t,n.textHeight=50,q[e.system]=n),n}var b=Object(n.useMemo)((function(){return a.find((function(e){return e.id===c}))}),[a,c]),f=performance.now(),h=Object(n.useMemo)((function(){for(var e=Object(L.a)({},i[0],{}),t=1;t<i.length;t++)e[i[t]]||(e[i[t]]={}),e[i[t-1]][i[t]]=!0,e[i[t]][i[t-1]]=!0;return{nodes:a,links:l.map((function(t){var a=e[t.source]&&e[t.source][t.target];return Object(d.a)(Object(d.a)({},t),{},{color:a?"#3399ff":"#666666",width:a?20:10})}))}}),[a,l,i]);function g(){if(b&&a.length){u.current.camera().up.set(0,0,1);var e,t=null,n=Object(H.a)(a);try{var r=function(){var a=e.value;if(!i.includes(a.id)&&!o.find((function(e){return e.systemId===a.id})))return"continue";t||(t={x:[a.fx,a.fx],y:[a.fy,a.fy],z:[a.fz,a.fz]}),a.fx<t.x[0]&&(t.x[0]=a.fx),a.fx>t.x[1]&&(t.x[1]=a.fx),a.fy<t.y[0]&&(t.y[0]=a.fy),a.fy>t.y[1]&&(t.y[1]=a.fy),a.fz<t.z[0]&&(t.z[0]=a.fz),a.fz>t.z[1]&&(t.z[1]=a.fz)};for(n.s();!(e=n.n()).done;)r()}catch(m){n.e(m)}finally{n.f()}var l={x:(t.x[0]+t.x[1])/2,y:(t.y[0]+t.y[1])/2,z:(t.z[0]+t.z[1])/2},c=1.2*Math.max(t.x[1]-t.x[0],t.z[1]-t.z[0]),s={x:l.x,y:l.y-c,z:l.z-c/4};console.log("bbox",t,l,c,s),u.current.cameraPosition(s,l,3e3)}}return console.log("route time",performance.now()-f),r.a.createElement("div",{className:s.root},r.a.createElement(_.a,null,(function(e){var a=e.height,n=e.width,l=t?a-40.4:a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:s.title,gutterBottom:!0,variant:"h5"},t),r.a.createElement(J.a,{enableNodeDrag:!1,graphData:h,height:l,nodeThreeObject:m,linkWidth:"width",linkOpacity:.5,nodeLabel:function(e){return"".concat(e.system," ").concat(e.security.toFixed(1),"<br/>x: ").concat(e.fx,"<br/>y: ").concat(e.fy,"<br/>z: ").concat(e.fz)},ref:u,width:n,cooldownTicks:1,controlType:"orbit",onEngineTick:g}))})))},$=a(229),Q=a(230);var X=function(e){var t=e.columns,a=e.data,n=e.page,l=e.rowsPerPage,c=n*l,o=c+l;return a.slice(c,o).map((function(e,a){return r.a.createElement($.a,{key:a},t.map((function(t,a){var n=e[t.dataKey],l=t.display?t.display(n):n,c={};return t.width&&(c.width=t.width),r.a.createElement(Q.a,{align:t.numeric?"right":"left",key:a,style:c},l)})))}))},Y=a(231),Z=a(232),ee=a(233),te=a(234),ae=a(246);function ne(e){var t=e.columns,a=e.data,l=Object(n.useState)(t&&t[0].sortDirection?t[0].sortDirection:"asc"),c=Object(f.a)(l,2),o=c[0],i=c[1],u=Object(n.useState)(t.length?t[0].dataKey:void 0),s=Object(f.a)(u,2),m=s[0],d=s[1],h=Object(n.useState)(0),v=Object(f.a)(h,2),p=v[0],y=v[1],O=Object(n.useState)(5),j=Object(f.a)(O,2),E=j[0],w=j[1];Object(n.useEffect)((function(){return y(0)}),[a]);var x=Object(n.useMemo)((function(){return Object(b.a)(a).sort((function(e,t){var a="asc"===o?1:-1;return e[m]===t[m]?0:e[m]>t[m]?1*a:-1*a}))}),[a,o,m]);function S(e,t){d(e),i(t)}return r.a.createElement(g.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(Y.a,null,r.a.createElement(Z.a,null,r.a.createElement(ee.a,null,r.a.createElement($.a,null,t.map((function(e,t){return r.a.createElement(le,{column:e,direction:o,key:t,onChangeSort:S,orderBy:m})})))),r.a.createElement(te.a,null,r.a.createElement(X,{columns:t,data:x,page:p,rowsPerPage:E})))),r.a.createElement(ae.a,{component:"div",count:a.length,onChangePage:function(e,t){return y(t)},onChangeRowsPerPage:function(e){var t=p*E,a=e.target.value;y(t/a),w(a)},page:p,rowsPerPage:E,rowsPerPageOptions:[5,10,25]}))}ne.defaultProps={columns:[],data:[]};var re=a(253);var le=function(e){var t=e.column,a=e.direction,n=e.onChangeSort,l=e.orderBy,c=(e.columnData,e.dataKey,e.disableSort,e.sortBy,Object(m.a)(e,["column","direction","onChangeSort","orderBy","columnData","dataKey","disableSort","sortBy"])),o=l===t.dataKey,i={align:t.numeric?"right":"left",key:t.dataKey,sortDirection:!!o&&a};return t.sortable?i.children=r.a.createElement(re.a,{active:o,direction:o?a:"asc",onClick:function(){return n(t.dataKey,o&&"asc"===a?"desc":"asc")}},t.label):i.children=t.label,r.a.createElement(Q.a,Object.assign({},c,i))},ce=a(83),oe=a.n(ce),ie=Object(W.a)((function(e){return Object(F.a)({flexContainer:{display:"flex",alignItems:"center",boxSizing:"border-box"},root:{height:"calc(100vh - (".concat(e.spacing(4),"px * 2))")},table:{"& .ReactVirtualized__Table__headerRow":{flip:!1,paddingRight:"rtl"===e.direction?"0 !important":void 0}},tableRow:{cursor:"pointer"},tableRowHover:{"&:hover":{backgroundColor:e.palette.grey[800]}},tableCell:{flex:1},title:{height:32,marginLeft:e.spacing(1),width:"max-content"},noClick:{cursor:"initial"}})}));function ue(e){var t=e.columns,a=e.data,l=e.headerHeight,c=e.onRowClick,o=e.rowHeight,i=e.title,u=e.selectedId,s=e.isSmallScreen,h=e.marginTop,g=ie(),v=Object(n.useState)(t&&t[0].sortDirection?t[0].sortDirection:"asc"),p=Object(f.a)(v,2),O=p[0],j=p[1],E=Object(n.useState)(t.length?t[0].dataKey:void 0),w=Object(f.a)(E,2),x=w[0],S=w[1],C=Object(n.useMemo)((function(){return Object(b.a)(a).sort((function(e,t){var a="asc"===O?1:-1;return e[x]===t[x]?0:e[x]>t[x]?1*a:-1*a}))}),[a,O,x]),k=oe()(g.tableCell,g.flexContainer,Object(L.a)({},g.noClick,null==c)),R=Object(n.useCallback)((function(e){var t=e.index;return oe()(g.tableRow,g.flexContainer,Object(L.a)({},g.tableRowHover,-1!==t&&null!=c))}),[g,c]),P=Object(n.useCallback)((function(e){var a=e.cellData,n=e.columnIndex;return r.a.createElement(Q.a,{align:null!=n&&t[n].numeric?"right":"left",component:"div",className:k,style:{height:o,padding:5},variant:"body",size:"small",padding:"none"},a)}),[k,t,o]),z=Object(n.useCallback)((function(e){var t=e.column,a=Object(m.a)(e,["column"]);return r.a.createElement(le,Object.assign({className:oe()(g.tableCell,g.flexContainer,g.noClick),column:t,component:"div",style:{height:l,padding:5},variant:"head",size:"small",padding:"none"},a),t.label)}),[g,l]);function T(e,t){S(e),j(t)}return r.a.createElement("div",{style:{height:"calc(".concat(s?100:50,"vh - (40px))"),marginTop:h}},r.a.createElement(_.a,null,(function(e){var a=e.height,n=e.width,s=i?a-40.4:a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:g.title,gutterBottom:!0,variant:"h5"},i),r.a.createElement(_.c,{className:g.table,gridStyle:{direction:"inherit"},headerHeight:l,height:s,noRowsRenderer:function(){return r.a.createElement("div",null,"No results.")},rowClassName:R,rowCount:C.length,rowGetter:function(e){var t=e.index;return C[t]},rowHeight:o,width:n,sortBy:x,rowStyle:function(e){var t=e.index;return t>-1&&C[t].id===u?{backgroundColor:"#666"}:{undefined:void 0}},onRowClick:c},t.map((function(e,t){var a={column:e,direction:O,onChangeSort:T,orderBy:x};return r.a.createElement(_.b,{cellRenderer:P,className:g.flexContainer,dataKey:e.dataKey,headerRenderer:function(e){return z(Object(d.a)(Object(d.a)({},a),e))},key:t,width:Number.isInteger(e.width)?e.width:e.width*n})}))))})))}ue.defaultProps={columns:[],data:[],headerHeight:48,rowHeight:48,selectedId:0};var se=ue,me=a(66),de=a(114),be=a(54),fe=a(67),he=a(70),ge=a(220),ve=a(243),pe=a(235),ye=a(8),Oe=function(e){Object(fe.a)(a,e);var t=Object(he.a)(a);function a(e){var n;return Object(me.a)(this,a),(n=t.call(this,e)).state={currentTab:0},n.setCurrentTab=n.setCurrentTab.bind(Object(be.a)(n)),n}return Object(de.a)(a,[{key:"setCurrentTab",value:function(e){this.setState({currentTab:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.classes,l=t.subNav,c=t.tabs,o=this.state.currentTab;return r.a.createElement(g.a,{className:n.root,item:!0,lg:12,md:12,xs:12},r.a.createElement(ge.a,{className:n.paper},r.a.createElement(ve.a,{centered:!0,onChange:function(t,a){return e.setCurrentTab(a)},value:o,variant:"fullWidth"},c.map((function(e,t){return r.a.createElement(pe.a,{key:t,label:e.label})})))),l,a[o])}}]),a}(r.a.Component);Oe.defaultProps={children:[],tabs:[]};var je=Object(ye.a)({root:{maxHeight:"100vh"},paper:{flexGrow:1}})(Oe);var Ee=j.b(new function(){return new Worker(a.p+"static/js/query.25ab2ed4.worker.js")}),we=Object(O.a)({pageLoading:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},test:{height:10,width:120}});var xe=function(){var e=E("baseSystem",0),t=Object(f.a)(e,2),a=t[0],l=t[1],c=E("distanceRange",[0,10]),o=Object(f.a)(c,2),i=o[0],u=o[1],s=E("securityRange",[.5,1]),O=Object(f.a)(s,2),w=O[0],x=O[1],S=E("richnessRange",[90,200]),C=Object(f.a)(S,2),R=C[0],P=C[1],z=E("resources",["Lustering Alloy"]),T=Object(f.a)(z,2),K=T[0],N=T[1],B=E("planetology",1),I=Object(f.a)(B,2),H=I[0],L=I[1],W=E("roundTrips",50),F=Object(f.a)(W,2),J=F[0],_=F[1],A=Object(n.useState)([]),V=Object(f.a)(A,2),G=V[0],q=V[1],$=Object(n.useState)(0),Q=Object(f.a)($,2),X=Q[0],Y=Q[1],Z=Object(n.useState)(65),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(["Lustering Alloy"]),re=Object(f.a)(ne,2),le=re[0],ce=re[1],oe=Object(n.useState)([]),ie=Object(f.a)(oe,2),ue=ie[0],me=ie[1],de=Object(n.useState)([]),be=Object(f.a)(de,2),fe=be[0],he=be[1],ge=Object(n.useState)([]),ve=Object(f.a)(ge,2),pe=ve[0],ye=ve[1],Oe=Object(n.useState)([]),xe=Object(f.a)(Oe,2),Se=xe[0],Ce=xe[1],ke=Object(n.useState)(0),Re=Object(f.a)(ke,2),Pe=Re[0],ze=Re[1],Te=Object(n.useState)({nodes:[],links:[]}),Ke=Object(f.a)(Te,2),Ne=Ke[0],De=Ke[1],Be=Object(h.a)((function(e){return e.breakpoints.down("sm")})),Ie=we(),Me=Object(n.useRef)(null);Object(n.useEffect)((function(){Ee.longestPath(a).then((function(e){return ae(e)}))}),[a]),Object(n.useEffect)((function(){Ee.getResources().then((function(e){return ce(e)}))}),[]),Object(n.useEffect)((function(){Ee.getSystems().then((function(e){return me(e)}))}),[]),Object(n.useEffect)((function(){Ee.matchingProduction(a,i,w,R,K).then((function(e){he(e),ye(e)}))}),[a,i,w,K,R]),Object(n.useEffect)((function(){Ee.findBestMatches(fe,a,K,H,J,j.a(q),j.a(Y))}),[fe,a,K,H,J]),Object(n.useEffect)((function(){console.log("calculating neighborhood for ".concat(a," range ").concat(i[1])),Ee.neighborhood(a,i[1]).then((function(e){console.log("got neighborhood",e),De(e)}))}),[a,i[1]]);var He=Object(n.useMemo)((function(){var e=Object(b.a)(Array(Math.round(te/10)).keys()).map((function(e){return{value:10*e,label:10*e}}));return e[-1]!==te&&e.push({value:te,label:te}),e}),[te]),Le=Object(n.useMemo)((function(){return[{Component:se,columns:[{dataKey:"totalRichness",label:"Total Richness",sortable:!0,sortDirection:"desc",width:.25},{dataKey:"roundTrip",label:"Round Trip",numeric:!0,sortable:!0,width:.25},{dataKey:"planets",label:"Planets",numeric:!0,sortable:!0,width:.25},{dataKey:"systems",label:"Systems",numeric:!0,sortable:!0,width:.25}],data:G,grid:{md:6,lg:4,xl:3},label:"Best Matches",selectedId:Pe,onRowClick:function(e){var t=e.rowData;console.log("click",t),window.scrollTo(0,document.body.scrollHeight),ye(t.matches),Ce(t.route),ze(t.id),Me&&Me.current&&Me.current.setCurrentTab(1)},title:Be?void 0:"Best Matches",rowHeight:40},{Component:se,columns:[{dataKey:"resource",label:"Resource",sortable:!0,width:.22},{dataKey:"planet",label:"Planet",sortable:!0,width:.22},{dataKey:"security",label:"Sec",numeric:!0,sortable:!0,width:.14},{dataKey:"jumps",label:"Jmp",numeric:!0,sortable:!0,width:.14},{dataKey:"richness",label:"Rich",numeric:!0,sortable:!0,width:.14},{dataKey:"output",label:"Out",numeric:!0,sortable:!0,width:.14}],grid:{md:6,lg:4,xl:3},data:pe,label:"Details",title:Be?void 0:"Details",rowHeight:40},Object(d.a)(Object(d.a)({Component:U},Ne),{},{baseSystem:a,details:pe,route:Se,grid:{md:6,lg:8,xl:9},label:"Map",title:Be?void 0:"Map"})]}),[G,pe,Be,Pe]),We=r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(v.a,{value:X,variant:"determinate"}));return 0===ue.length?r.a.createElement(p.a,{className:Ie.pageLoading,open:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h5",gutterBottom:!0},"Loading..."),r.a.createElement("div",{className:Ie.test},r.a.createElement(v.a,null)))):r.a.createElement(g.a,{container:!0,spacing:4},r.a.createElement(g.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(y.a,{variant:"h4",width:1},"EVE Echoes"),r.a.createElement(y.a,{variant:"h5",width:1},"Planetary Production")),r.a.createElement(k,{disableClearable:!0,getOptionLabel:function(e){return ue[e].label},label:"Base System",onChange:function(e,t){return l(t)},options:ue.map((function(e,t){return t})),value:a}),r.a.createElement(M,{label:"Distance to System (jumps)",marks:He,max:te,min:0,onChange:function(e,t){return u(t)},step:1,value:i}),r.a.createElement(M,{label:"System Security",marks:[{value:-1,label:"-1.0"},{value:0,label:"0.0"},{value:.5,label:"0.5"},{value:1,label:"1.0"}],max:1,min:-1,onChange:function(e,t){return x(t)},step:.1,value:w}),r.a.createElement(D,{id:"resources",label:"Resource Types",onChange:function(e,t){return N(t)},options:le,value:K}),r.a.createElement(M,{label:"Resource Richness",marks:[{value:25,label:"25"},{value:100,label:"high sec"},{value:133,label:"low sec"},{value:200,label:"200"}],max:200,min:25,onChange:function(e,t){return P(t)},step:1,value:R}),r.a.createElement(M,{label:"Planets (Planetology max development)",marks:[{value:1,label:"1"},{value:6,label:"6"}],max:6,min:1,onChange:function(e,t){return L(t)},step:1,value:H}),r.a.createElement(M,{label:"Max Round Trip length (jumps)",marks:[0,50,100,150,200].map((function(e){return{value:e,label:"".concat(e)}})),max:200,min:0,onChange:function(e,t){return _(t)},step:1,value:J}),Be?r.a.createElement(je,{ref:Me,tabs:Le,subNav:We},Le.map((function(e,t){var a=e.Component,n=Object(m.a)(e,["Component"]);return r.a.createElement(a,Object.assign({key:t},n,{isSmallScreen:Be}))}))):r.a.createElement(r.a.Fragment,null,We,r.a.createElement(g.a,Object.assign({item:!0},Le[0].grid),r.a.createElement(se,Object.assign({},Le[0],{isSmallScreen:Be})),r.a.createElement(se,Object.assign({},Le[1],{isSmallScreen:Be,marginTop:16}))),r.a.createElement(g.a,Object.assign({item:!0},Le[2].grid),r.a.createElement(U,Le[2]))))},Se=Object(u.a)({palette:{type:"dark"}});var Ce=function(){return r.a.createElement(s.a,{theme:Se},r.a.createElement(o.a,null),r.a.createElement(i.a,{maxWidth:"xl",style:{marginTop:16}},r.a.createElement(xe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.41ac720a.chunk.js.map